<html>
<head>
<style type="text/css">
@import "jquery.svg.css";

#svgview { width: 100%; height: 84%; border: 1px solid #484}
</style>
<script type="text/javascript" src="jquery/jquery-1.6.2.min.js"></script>
<script type="text/javascript" src="jquery/jquery.svg.js"></script>
</head>
<body>
<div id="svgview"></div>
<div><textarea style="width: 100%; height: 15%" id="log"></textarea></div>
<script>
window.SO_VIEW = 'views/view1';

function log(msg) {
    $('#log').append(msg + "\n");
}

function loadViewDone(svg, error) {
    if(error) {
	log('Failed: ' + error);
	svg.text(10, 20, error, {fill: 'red'});
	return;
    }

    log('Searching charts...');
    var charts = new Array();
    $('rect[id^="so_"]', svg.root()).each(function() {
	charts.push(this.id);
    });
    log(' ' + charts.join(', '));
}

$('#svgview').svg({loadURL: window.SO_VIEW + '.svg', onLoad: loadViewDone});
</script>
</html>
